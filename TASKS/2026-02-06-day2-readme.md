---
title: "Day-2: Real API Routes + Prisma Integration"
date: 2026-02-06
branch: "day2/readme"
owner: "unassigned"
scope:
  - "TASKS/day_02/**"
estimate: "n/a"
---

```markdown
# travel.aw — Day-2: Real API Routes + Prisma Integration

> **Prerequisite:** All Day-1 sessions (0–5) merged to master. DB seeded with 2 trips + items.

Use one branch per worker. Keep **scope lock** strict to avoid merge conflicts.

Merge order:
1. `day2/api-routes` (Worker A — backend)
2. `day2/frontend-real-data` (Worker B — frontend)

Rule: If an out-of-scope change seems required, add a TODO comment instead of editing the file.

## Key context: Prisma ↔ Contracts mapping

Prisma stores data as flat fields + JSON strings. `@travel/contracts` expects nested objects:

| Prisma (flat) | Contracts (nested) |
|---|---|
| `priceAmount` + `priceCurrency` | `price: { amount, currency }` |
| `locationName/Address/Lat/Lng` | `location: { name, address?, lat?, lng? }` |
| `offerData` (JSON string) | `offer: OfferHotel \| OfferFlight` |
| `citationsData` (JSON string) | `citations: Citation[]` |
| `createdAt` (DateTime) | `createdAt` (ISO 8601 string) |

A shared `_lib/mappers.ts` module (created by Worker A) handles this translation.
Worker B imports from it but does NOT modify it.

```
